{
  "configVersion": 1,
  "debug": {
    "logToFile": true
  },
  "realtime": {
    "staleDataThresholdSeconds": 2,
    "staleCheckIntervalMs": 500
  },
  "deviations": {
    "o2WindowSize": 25,
    "o2MinRangeV": 0.06,
    "stftRunThreshold": 25,
    "lowTimingThreshold": 20,
    "knockThreshold": 10
  },
  "bluetooth": {
    "scanTimeoutSeconds": 10,
    "obdNameKeywords": ["obd", "elm327", "elm", "vgate"]
  },
  "polling": {
    "profiles": {
      "default": {
        "everyNth": { "important": 2, "normal": 3, "low": 4 },
        "groups": {
          "critical": ["rpm", "speed"],
          "important": [
            "shortTermFuelTrimBank1",
            "longTermFuelTrimBank1",
            "timingAdvance",
            "engineLoad",
            "throttlePosition"
          ],
          "normal": [
            "coolantTemp",
            "intakeAirTemp",
            "fuelSystemStatus",
            "fuelPressure",
            "intakeManifoldPressure"
          ],
          "low": [
            "shortTermFuelTrimBank2",
            "longTermFuelTrimBank2",
            "o2SensorVoltageBank1Sensor1",
            "o2SensorVoltageBank1Sensor2",
            "knockCorrection"
          ]
        }
      }
    }
  },
  "norms": {
    "closedLoopCodes": [2, 16],
    "params": {
      "shortTermFuelTrimBank1": { "min": -10, "max": 10 },
      "longTermFuelTrimBank1": { "min": -10, "max": 10 },
      "shortTermFuelTrimBank2": { "min": -10, "max": 10 },
      "longTermFuelTrimBank2": { "min": -10, "max": 10 },
      "timingAdvance": { "min": -10, "max": 45 },
      "coolantTemp": { "min": 70, "max": 110 },
      "intakeAirTemp": { "min": -20, "max": 100 },
      "fuelPressure": { "min": 250, "max": 450 },
      "intakeManifoldPressure": { "min": 0, "max": 110 },
      "engineLoad": { "min": 0, "max": 100 },
      "throttlePosition": { "min": 0, "max": 100 },
      "knockCorrection": { "min": 0, "max": 100 }
    }
  },
  "analysis": {
    "qualityFilterDefaults": { "minCoolant": 80, "minLoad": 40, "minRpm": 1500, "minValidRows": 10 },
    "octaneFilterDefaults": {
      "minCoolant": 80,
      "minLoad": 40,
      "minRpm": 1500,
      "maxRpm": 4000,
      "minThrottle": 25.0,
      "minOctaneRows": 30
    },
    "scoring": {
      "stftWeight": 1.5,
      "stftClampMax": 15,
      "ltftWeight": 3.0,
      "ltftClampMax": 30,
      "timingMinBadThreshold": -5.0,
      "timingBadPenalty": 15,
      "o2StdDevMin": 0.05,
      "o2LowActivityPenalty": 5,
      "fuelPressureMeanMin": 300,
      "fuelPressureLowPenalty": 10,
      "knockEventPenalty": 2,
      "knockPenaltyClampMax": 30
    }
  },
  "elm": {
    "commandTimeoutMs": 8000,
    "minDelayBetweenObdCommandsMs": 100,
    "minDelayV15Ms": 150,
    "minDelayV21Ms": 80,
    "readLoopIntervalMs": 300,
    "readLoopIntervalV15Ms": 400,
    "readLoopIntervalV21Ms": 250,
    "adaptiveSlowingThresholdMs": 500,
    "adaptiveSlowingPenaltyMs": 50,
    "adaptiveSlowingMaxBonusMs": 200,
    "maxConsecutiveErrors": 5,
    "pidNoDataBlacklistThreshold": 3,
    "pidNoDataBlacklistDurationSeconds": 60
  },
  "logging": {
    "isolateHandshakeTimeoutSeconds": 5
  },
  "foreground": {
    "serviceId": 256,
    "repeatIntervalMs": 60000,
    "channel": {
      "id": "obd_logging_channel",
      "name": "Запись лога OBD",
      "description": "Уведомление при записи лог-файла в фоне"
    }
  },
  "paths": {
    "logFolderName": "OBDReader",
    "logFileName": "obd_log.csv",
    "logFilePattern": "obd_log_{ts}.csv",
    "androidPreferredLogDir": "/storage/emulated/0/Documents/OBDReader"
  },
  "strings": {
    "staleBannerText": "Нет новых данных более {seconds} сек. Возможна задержка обмена с адаптером.",
    "logErrorBannerText": "Ошибка записи лог‑файла. Проверьте разрешения и доступ к папке.",
    "appDescription": "OBD Reader — приложение для смартфона, которое подключается к автомобилю через адаптер ELM327 (Bluetooth BLE или классический SPP) и читает данные с блока управления двигателем (ЭБУ).",
    "appPurpose": "Назначение: помощь в оценке качества топлива и состояния топливной системы по параметрам в реальном времени (топливные коррекции, угол зажигания, лямбда-зонды и др.). Данные можно сохранять в CSV-лог для последующего анализа.",
    "paramDisplayNames": {
      "shortTermFuelTrimBank1": "STFT Bank 1",
      "longTermFuelTrimBank1": "LTFT Bank 1",
      "shortTermFuelTrimBank2": "STFT Bank 2",
      "longTermFuelTrimBank2": "LTFT Bank 2",
      "timingAdvance": "Угол опережения зажигания",
      "coolantTemp": "Температура ОЖ",
      "intakeAirTemp": "Температура воздуха на впуске",
      "fuelPressure": "Давление топлива",
      "intakeManifoldPressure": "Давление во впуске",
      "engineLoad": "Нагрузка двигателя",
      "throttlePosition": "Положение дросселя",
      "o2SensorVoltageBank1Sensor1": "O₂ B1S1",
      "o2SensorVoltageBank1Sensor2": "O₂ B1S2",
      "fuelSystemStatus": "Статус топливной системы",
      "knockCorrection": "Коррекция по детонации"
    },
    "normsDescriptions": {
      "shortTermFuelTrimBank1": "Норма: коррекции колеблются вокруг 0%. Типично ~-10%…+10%; кратковременные пики STFT до ±20–25% допустимы. Устойчивые значения |LTFT| > 5–10% или |STFT| > 10–15% — повод проверить двигатель и качество топлива.",
      "longTermFuelTrimBank1": "Норма: коррекции колеблются вокруг 0%. Типично ~-10%…+10%; кратковременные пики STFT до ±20–25% допустимы. Устойчивые значения |LTFT| > 5–10% или |STFT| > 10–15% — повод проверить двигатель и качество топлива.",
      "timingAdvance": "Норма: 0-40° до ВМТ",
      "coolantTemp": "Норма: 85-105°C",
      "intakeAirTemp": "Норма: близка к окружающей + нагрев",
      "fuelPressure": "Норма: 300-400 kPa",
      "intakeManifoldPressure": "Норма: 20-40 kPa (ХХ), 90-100 kPa (нагрузка)",
      "engineLoad": "Норма: 0-100%",
      "throttlePosition": "Норма: 0-5% (ХХ), до 100%",
      "o2SensorVoltageBank1Sensor1": "Норма: активные колебания напряжения (~0.1–0.9 В). Отклонение — стабильное значение без колебаний.",
      "o2SensorVoltageBank1Sensor2": "Норма: активные колебания напряжения (~0.1–0.9 В). Отклонение — стабильное значение без колебаний.",
      "fuelSystemStatus": "Норма: Closed loop (коды 2 или 16)",
      "knockCorrection": "Норма: стабильные значения"
    },
    "analysis": {
      "qualityLabelExcellent": "Отличное топливо",
      "qualityLabelNormal": "Нормальное топливо",
      "qualityLabelDoubtful": "Сомнительное топливо",
      "qualityLabelBad": "Плохое топливо",
      "qualityNotCalculatedEmpty": "Не определена (файл пуст)",
      "qualityNotCalculatedHeaderOnly": "Не определена (файл пуст или только заголовок)",
      "qualityNotCalculatedNotEnoughData": "Не определена (недостаточно валидных данных)",
      "octaneDetectedUnknown": "неопределено",
      "octaneNotEnoughData": "Недостаточно данных под нагрузкой для оценки октанового числа.",
      "octaneMessage92": "Двигатель работает на границе детонационной стойкости.",
      "octaneMessage95": "Оптимальное октановое поведение для типичных моторов.",
      "octaneMessage98": "Топливо с повышенной детонационной стойкостью.",
      "octaneMessageDefault": "Недостаточно данных для уверенного вывода."
    },
    "foreground": {
      "notificationTitle": "OBD Reader",
      "notificationText": "Идёт запись лог-файла",
      "stopButtonText": "Остановить запись"
    },
    "logging": {
      "noLogFileYet": "No log file created yet.",
      "errorReadingLog": "Error reading log: {error}"
    },
    "debugPage": {
      "title": "Информация",
      "tabHelp": "Справка",
      "tabFile": "Файл",
      "aboutTitle": "О программе",
      "featuresTitle": "Возможности и функционал:",
      "parametersTitle": "Параметры в логе и связь с качеством топлива",
      "features": [
        "Подключение к ELM327 по Bluetooth (BLE или SPP) с выбором устройства из списка.",
        "Отображение параметров двигателя в реальном времени: обороты, скорость, топливные коррекции (STFT/LTFT), угол опережения зажигания, лямбда-зонды, температуры, нагрузка и др.",
        "Цветовая индикация: зелёный — норма, жёлтый — граница нормы, красный — за пределами. При отсутствии данных более ~2 секунд значения заменяются на «−».",
        "Запись лога в CSV-файл во время поездки; запись продолжается в фоне при сворачивании приложения (уведомление с кнопкой «Остановить запись»).",
        "Вкладка «Отклонения»: автоматическое выделение параметров, выходящих за норму, и особых ситуаций (например, отсутствие колебаний лямбда-зонда, устойчивые топливные коррекции). По нажатию на карточку — детали.",
        "Раздел «Анализ лога»: загрузка сохранённого CSV и просмотр сводок по параметрам (в т.ч. лямбда, коррекции).",
        "Файлы логов сохраняются в папку Documents/OBDReader; путь и открытие папки/файла — во вкладке «Файл» этого окна."
      ],
      "analysisDescription": "В разделе вы выбираете CSV-файл с записанной поездкой (из папки приложения или с устройства). Строится сводка по топливным коррекциям, лямбда-зондам, углу зажигания и другим параметрам. По ней можно оценить качество топлива и заподозрить низкое октановое число. Доступны фильтры по порогам для ограничения используемых данных, чтобы использовать только рабочие диапазоны двигателя.",
      "paramHints": {
        "timestamp": "Время измерения (норма не задаётся, формат ISO8601).",
        "rpm": "Нормально: ~650–850 об/мин на ХХ, до ~6000–6500 об/мин под нагрузкой.",
        "speed": "Нормальные значения зависят от режима (0 км/ч на ХХ, далее по ситуации).",
        "fuelTrimBank1": "В норме STFT колеблется около 0% и чаще всего укладывается в ~-10%…+10%. Кратковременные пики STFT до ±20–25% на переходных режимах допустимы. LTFT в норме близок к нулю; устойчивые значения |LTFT| > 5–10% или |STFT| > 10–15% — повод задуматься о качестве топлива и состоянии системы.",
        "fuelTrimBank2": "Диапазоны те же, что и для Bank 1; профиль коррекций в норме похож. Существенное и устойчивое отличие по величине или знаку от Bank 1 может указывать на неравномерное сгорание по рядам цилиндров.",
        "timingAdvance": "Норма зависит от оборотов/нагрузки (обычно ~0–40° до ВМТ). Резко заниженный угол при тех же режимах может говорить о детонации/топливе.",
        "o2Sensors": "Норма: активные колебания примерно 0.1–0.9 В (для узкополосных датчиков).",
        "fuelPressure": "Норма зависит от системы (часто ~300–400 kPa для бензиновых). Резкие провалы/скачки — плохо.",
        "intakeManifoldPressure": "На ХХ обычно низкое (~20–40 kPa), при полной нагрузке приближается к атмосферному (~90–100 kPa).",
        "engineLoad": "Норма: от ~15–30% на лёгких режимах до 80–100% при сильном разгоне.",
        "throttlePosition": "Норма: 0–5% на ХХ, до ~100% при полностью нажатой педали.",
        "coolantTemp": "Норма: рабочая температура обычно ~85–105 °C.",
        "intakeAirTemp": "Обычно близка к температуре окружающей среды + нагрев под капотом.",
        "fuelSystemStatus": "Норма для анализа топлива — closed loop (коды 2 или 16).",
        "knockCorrection": "Рост значения/частые изменения могут говорить о плохом бензине."
      },
      "fileTab": {
        "title": "Управление файлами лога",
        "folderLabel": "Папка записи файлов лога",
        "refreshPath": "Обновить путь",
        "openFolder": "Открыть папку в проводнике",
        "openCurrentLog": "Открыть текущий файл лога",
        "pathNotSet": "Путь к папке не указан",
        "pathCopied": "Путь скопирован в буфер. Откройте проводник и вставьте путь в адресную строку (или в поиск).",
        "openFileError": "Не удалось открыть файл: {message}",
        "openFileException": "Ошибка при открытии файла: {error}",
        "folderDescription": "Папка записи используется приложением для автоматического сохранения файлов лога. Каждый новый сеанс логирования создает новый файл с датой и временем в названии. Используйте кнопки выше для открытия папки в файловом менеджере или текущего файла лога."
      }
    }
  },
  "remoteConfigUrl": "https://raw.githubusercontent.com/Razza2/odb_reader_appconfig/refs/heads/main/app_config.json"
}